---
import { Picture } from "astro:assets"

const { name, description, slug, image, company, layout = "card" } = Astro.props

const baseStyle = "p-5 w-full h-full rounded-2xl hover-fx"

const layoutStyle: any = {
  card: "flex flex-col gap-3",
  list: "flex flex-row-reverse gap-3 justify-between",
}

const hoverStyle: any = {
  card: "group-hover:shadow-lg group-hover:-translate-y-1",
  list: "group-hover:shadow-lg group-hover:translate-x-1",
}

const coverSize: any = {
  card: "w-full h-48 md:h-36",
  list: "w-full h-48 md:h-44",
}

const headingStyle: any = {
  card: "text-base",
  list: "text-lg",
}

const clampStyle: any = {
  card: "line-clamp-5 md:line-clamp-3",
  list: "line-clamp-4 md:line-clamp-5 lg:line-clamp-6",
}

const svgArrowStyle: any = {
  card: "translate-y-2",
  list: "translate-y-2.5",
}
---

<a
  data-layout={layout}
  href={`portfolio/${slug}`}
  class="relative flex flex-col w-full items-stretch group h-100 rounded-2xl"
>
  <div class:list={[baseStyle, layoutStyle[layout]]}>
    <div class="block w-full">
      <img
        src={image}
        class=`rounded-xl object-cover transition-all duration-300 ease-out`
        class:list={[hoverStyle[layout], coverSize[layout]]}
      />
    </div>
    <div class="block w-full divide-y-4 divide-transparent">
      <div
        class="flex relative gap-2 items-start justify-start mb-0 font-semibold tracking-tight text-neutral-900 dark:text-neutral-100"
        class:list={[headingStyle[layout]]}
      >
        <div>{name}</div>
        <svg
          class="inline-flex group-hover:translate-x-0 translate-y-2 -translate-x-1 w-2.5 h-2.5 stroke-current ml-1 transition-all ease-in-out duration-200 transform"
          class:list={[svgArrowStyle[layout]]}
          viewBox="0 0 13 15"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
        >
          <g
            stroke="none"
            stroke-width="1"
            fill="none"
            fill-rule="evenodd"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <g
              id="svg"
              transform="translate(0.666667, 2.333333)"
              stroke="currentColor"
              stroke-width="2.4"
            >
              <g>
                <polyline
                  class="transition-all duration-200 ease-out opacity-0 delay-0 group-hover:opacity-100"
                  points="5.33333333 0 10.8333333 5.5 5.33333333 11"
                >
                </polyline>
                <line
                  class="transition-all duration-200 ease-out transform -translate-x-1 opacity-0 group-hover:translate-x-0 group-hover:opacity-100 group-hover:ml-0"
                  x1="10.8333333"
                  y1="5.5"
                  x2="0.833333333"
                  y2="5.16666667"
                >
                </line>
              </g>
            </g>
          </g>
        </svg>
      </div>
      <div class="text-sm text-neutral-900 font-medium dark:text-neutral-400">
        {company}
      </div>
      <div
        class="text-sm text-neutral-600 dark:text-neutral-400"
        class:list={[clampStyle[layout]]}
      >
        {description}
      </div>
    </div>
  </div>
</a>
